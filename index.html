<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Base</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .search-section {
            padding: 40px;
            background: white;
        }

        .search-container {
            position: relative;
            margin-bottom: 30px;
        }

        .search-input {
            width: 100%;
            padding: 20px 60px 20px 20px;
            font-size: 1.1rem;
            border: 3px solid #e0e6ed;
            border-radius: 15px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .search-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .quick-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
            font-size: 1rem;
            box-shadow: 0 5px 15px rgba(240, 147, 251, 0.2);
        }

        .quick-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(240, 147, 251, 0.3);
        }

        .quick-btn:nth-child(2) {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .quick-btn:nth-child(3) {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .quick-btn:nth-child(4) {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .quick-btn:nth-child(5) {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #333;
        }

        .quick-btn:nth-child(6) {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: #333;
        }

        .results-section {
            padding: 0 40px 40px;
            background: white;
        }

        .result-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            border-left: 5px solid #667eea;
        }

        .result-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .result-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
        }

        .result-content {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
            font-size: 1rem;
        }

        .result-source {
            font-size: 0.9rem;
            color: #667eea;
            font-weight: 600;
        }

        .no-results {
            text-align: center;
            color: #666;
            font-size: 1.1rem;
            padding: 40px;
        }

        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .search-section {
                padding: 20px;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
            
            .results-section {
                padding: 0 20px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéß Knowledge Base</h1>
            <p>Tick Tock Loans - Customer Service & Collections</p>
        </div>
        <div class="search-section">
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="Search procedures, policies, or guidelines..." onkeypress="handleKeyPress(event)">
                <button class="search-btn" onclick="performSearch()">üîç Search</button>
            </div>
            <div class="quick-actions">
                <div class="quick-btn" onclick="quickSearch('right to withdraw RTW')">‚Ü©Ô∏è RTW Process</div>
                <div class="quick-btn" onclick="quickSearch('interest queries charges')">üìä Interest Queries</div>
                <div class="quick-btn" onclick="quickSearch('fraud investigation')">üõ°Ô∏è Fraud Process</div>
                <div class="quick-btn" onclick="quickSearch('website login password')">üîê Website Login Queries</div>
                <div class="quick-btn" onclick="quickSearch('payment plan schedule reset')">üìÖ PP/Schedule Reset Process</div>
                <div class="quick-btn" onclick="quickSearch('vulnerability TEXAS IDEA')">‚ù§Ô∏è Vulnerability Process</div>
            </div>
        </div>
        <div class="results-section" id="resultsSection">
            <div id="searchResults"></div>
        </div>
    </div>
    <script>
        // Knowledge base for Tick Tock Loans based on provided documentation
        const knowledgeBase = [
            {
                id: 1,
                title: "Right to Withdraw (RTW) Process",
                content: "Period: 14 days from day after loan funding. Process: 1) Provide current balance, 2) Explain daily interest accrual, 3) Repayment period: 30 days from withdrawal, 4) Credit file entry removed upon payment. Customer pays current balance (principal + accrued interest).",
                source: "Customer Service Handbook Section 7.4",
                keywords: ["right to withdraw", "RTW", "14 days", "withdrawal", "cancel loan"]
            },
            {
                id: 2,
                title: "Interest Accrual and Charges",
                content: "Daily interest accrues on outstanding balance. Default charges: ¬£15.00 applied at 4 PM on due date. For payment plan arrangements, interest continues to accrue during repayment period. Always explain to customers how interest affects total repayment amount.",
                source: "Collections & Payment Management Section 7.3",
                keywords: ["interest", "daily interest", "charges", "default fee", "accrual"]
            },
            {
                id: 3,
                title: "Fraud Investigation Process",
                content: "For suspected fraud: 1) Investigate thoroughly, 2) Document all evidence, 3) Report to Massimo Cristi immediately. Never process any transactions if fraud is suspected. Gather all relevant information before escalating. Freeze account activity pending investigation.",
                source: "Special Circumstances Section 8.5",
                keywords: ["fraud", "investigation", "suspicious", "report", "Massimo Cristi"]
            },
            {
                id: 4,
                title: "Website Login Issues - Password Reset",
                content: "Online Password Reset: 1) Direct customer to www.ticktockloans.com, 2) Click login icon (top right), 3) Click 'Forgot Password', 4) Enter email and surname EXACTLY as in CRM (case sensitive), 5) System sends encrypted password. Troubleshooting: Ensure no extra spaces when copying/pasting password.",
                source: "Customer Verification & Security Section 4.1",
                keywords: ["website", "login", "password", "reset", "forgot password", "ticktockloans.com"]
            },
            {
                id: 5,
                title: "Payment Plan Schedule Reset Process",
                content: "Setting up new schedules: Choose between 'Pay plan by amounts' (fixed monthly amount) or 'Pay plan by duration' (specific number of months). Required info: 1) Payment method (manual/card), 2) First repayment date, 3) Frequency, 4) Schedule category (interest accrual decision). Always send 'Payment Plan CPA Confirmation' email after setup.",
                source: "Repayment Plans Section 13.6",
                keywords: ["payment plan", "schedule", "reset", "payplan", "arrangement", "duration", "amounts"]
            },
            {
                id: 6,
                title: "Vulnerability Support - TEXAS Model",
                content: "Apply TEXAS Model: 1) Thank customer for sharing, 2) Explain how information will be used, 3) eXplicit consent for recording, 4) Ask about the situation, 5) Signpost to available support. Use IDEA Model to understand: Impact, Duration, Extent, Action. Options include breathing space, debt management support, and referral to Vulnerabilities Specialist Team.",
                source: "Supporting Vulnerable Customers Section 10",
                keywords: ["vulnerability", "TEXAS", "IDEA", "mental health", "vulnerable", "breathing space", "support"]
            },
            {
                id: 7,
                title: "Customer Verification Requirements",
                content: "Primary Verification (Must Pass All): 1) Full Name, 2) Date of Birth, 3) Full Address and Postcode. Secondary Verification (if primary fails): Email address, Employment details, Unique account information. Failed verification: Cannot discuss account details, advise retry later.",
                source: "Data Protection & Privacy Section 1.1",
                keywords: ["verification", "security", "data protection", "DOB", "address", "failed verification"]
            },
            {
                id: 8,
                title: "Payment Processing - Two Methods",
                content: "Method 1 (Not Due Date): Account tab ‚Üí Transactions ‚Üí Card Payment. IMPORTANT: Reschedule repayment plan after payment. Method 2 (On Due Date): Account tab ‚Üí Expand payplan ‚Üí Card icon. Payment schedule updates automatically, no rescheduling required.",
                source: "Payments & Interest Section 7.2",
                keywords: ["payment processing", "card payment", "due date", "reschedule", "transactions"]
            },
            {
                id: 9,
                title: "Debt Management Company (DMC) Process",
                content: "Required documents within 21 days: 1) Letter of authority, 2) Financial statement, 3) Repayment offer. Pre-loan DMC: If DMC date precedes loan date, refuse DMC and work directly with customer. Always verify letter of authority in attachments before proceeding.",
                source: "Debt Management Section 8.1",
                keywords: ["DMC", "debt management", "letter of authority", "financial statement", "21 days"]
            },
            {
                id: 10,
                title: "Collections Timeline and Actions",
                content: "Due -7: Email reminder. Due -1: Email reminder. Due: Email + SMS + Move to Collections. Due +14: Move to Collections M0. Due +28: Notice of Pending CRA Default + Move to Collections M1. Due +49: Move to Collections M2. Due +56: Move to Collections Review. Default charge ¬£15.00 applied at 4 PM on due date.",
                source: "Collections Strategy Timeline Section 7.1",
                keywords: ["collections", "timeline", "M0", "M1", "M2", "default notice", "CRA", "arrears"]
            },
            {
                id: 11,
                title: "Complaint Handling Process",
                content: "Definition: Any expression of dissatisfaction (oral or written). Same-day resolution: No complaints department notification required, document in notes. Cannot resolve same day: Raise complaint task for Alex Cross. Timeframes: Acknowledgment within 5 days, Final response within 8 weeks. FOS referral costs ¬£650 regardless of outcome.",
                source: "Complaints & Dispute Resolution Section 11.1",
                keywords: ["complaint", "FOS", "Alex Cross", "5 days", "8 weeks", "dissatisfaction"]
            },
            {
                id: 12,
                title: "Application Lifecycle and Stages",
                content: "Stages: Lead Gen ‚Üí E-sign Sent ‚Üí Application Completed ‚Üí Funds Processing ‚Üí Funds Sent. Application expiry: 3 days without decision. Lending limits: 1 concurrent loan, maximum 4 loans per customer total. Cooling off periods: 1 loan=30 days, 2 loans=60 days, 3 loans=90 days, 4 loans=no further loans.",
                source: "Application Management Section 5.3-5.4",
                keywords: ["application", "stages", "expiry", "lending limits", "cooling off", "e-sign"]
            }
        ];

        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            if (query.length < 2) {
                displayResults([]);
                return;
            }
            
            const results = searchKnowledgeBase(query);
            displayResults(results, query);
        }

        function quickSearch(query) {
            document.getElementById('searchInput').value = query;
            performSearch();
        }

        function searchKnowledgeBase(query) {
            const queryWords = query.toLowerCase().split(' ');
            
            return knowledgeBase.map(item => {
                let score = 0;
                const searchText = (item.title + ' ' + item.content + ' ' + item.keywords.join(' ')).toLowerCase();
                
                queryWords.forEach(word => {
                    if (word.length > 2) {
                        const titleMatches = (item.title.toLowerCase().match(new RegExp(word, 'g')) || []).length;
                        const keywordMatches = item.keywords.filter(keyword => 
                            keyword.toLowerCase().includes(word)).length;
                        const contentMatches = (item.content.toLowerCase().match(new RegExp(word, 'g')) || []).length;
                        
                        score += titleMatches * 3 + keywordMatches * 2 + contentMatches;
                    }
                });
                
                return { ...item, score };
            })
            .filter(item => item.score > 0)
            .sort((a, b) => b.score - a.score);
        }

        function displayResults(results, query = '') {
            const resultsContainer = document.getElementById('searchResults');
            
            if (results.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="no-results">
                        ${query ? `No results found for "${query}". Try different keywords or check the quick access buttons above.` : 'Start typing to search the knowledge base...'}
                    </div>
                `;
                return;
            }
            
            const resultsHTML = results.map(result => {
                let highlightedContent = result.content;
                if (query) {
                    const queryWords = query.split(' ').filter(word => word.length > 2);
                    queryWords.forEach(word => {
                        const regex = new RegExp(`(${word})`, 'gi');
                        highlightedContent = highlightedContent.replace(regex, '<span class="highlight">$1</span>');
                    });
                }
                
                return `
                    <div class="result-card">
                        <div class="result-title">${result.title}</div>
                        <div class="result-content">${highlightedContent}</div>
                        <div class="result-source">üìã ${result.source}</div>
                    </div>
                `;
            }).join('');
            
            resultsContainer.innerHTML = resultsHTML;
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                performSearch();
            }
        }

        // Initialize with empty state
        displayResults([]);
    </script>
</body>
</html>