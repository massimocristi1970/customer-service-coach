<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Service Coach</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            text-align: center;
        }

        .header h1 {
            color: #2c5aa0;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 14px;
        }

        .search-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 16px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            border-color: #2c5aa0;
        }

        .search-btn {
            position: absolute;
            right: 5px;
            top: 5px;
            padding: 10px 20px;
            background: #2c5aa0;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s ease;
        }

        .search-btn:hover {
            background: #1e3d6f;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .quick-btn {
            padding: 12px 20px;
            background: #f8f9fb;
            border: 1px solid #e1e5e9;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .quick-btn:hover {
            background: #2c5aa0;
            color: white;
            transform: translateY(-1px);
        }

        .results-section {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            display: none;
        }

        .results-section.show {
            display: block;
        }

        .result-item {
            border-left: 4px solid #2c5aa0;
            background: #f8f9fb;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 0 8px 8px 0;
        }

        .result-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 10px;
        }

        .result-title {
            font-weight: 600;
            color: #2c5aa0;
            margin-bottom: 5px;
        }

        .result-source {
            font-size: 12px;
            color: #666;
            background: #e8f0fe;
            padding: 3px 8px;
            border-radius: 12px;
        }

        .result-content {
            color: #444;
            line-height: 1.7;
            margin: 10px 0;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .helpful-btns {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .helpful-btn {
            padding: 5px 12px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .helpful-btn.yes:hover {
            background: #d4edda;
            border-color: #28a745;
        }

        .helpful-btn.no:hover {
            background: #f8d7da;
            border-color: #dc3545;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .search-section, .header {
                padding: 20px;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Customer Service Coach</h1>
            <p>Ask any question about policies, procedures, or customer issues</p>
        </div>

        <div class="search-section">
            <div class="search-box">
                <input type="text" 
                       class="search-input" 
                       id="searchInput" 
                       placeholder="Ask your question... (e.g., 'How do I process a refund?')"
                       onkeypress="handleKeyPress(event)">
                <button class="search-btn" onclick="searchKnowledge()">Search</button>
            </div>

            <div class="quick-actions">
                <div class="quick-btn" onclick="quickSearch('right to withdraw RTW')">‚Ü©Ô∏è RTW Process</div>
                <div class="quick-btn" onclick="quickSearch('interest queries charges')">üìä Interest Queries</div>
                <div class="quick-btn" onclick="quickSearch('fraud investigation')">üõ°Ô∏è Fraud Process</div>
                <div class="quick-btn" onclick="quickSearch('website login password')">üîê Website Login Queries</div>
                <div class="quick-btn" onclick="quickSearch('payment plan schedule reset')">üìÖ PP/Schedule Reset Process</div>
                <div class="quick-btn" onclick="quickSearch('vulnerability TEXAS IDEA')">‚ù§Ô∏è Vulnerability Process</div>
            </div>
        </div>

        <div class="results-section" id="resultsSection">
            <div id="searchResults"></div>
        </div>
    </div>

    <script>
        // Knowledge base for Tick Tock Loans based on provided documentation
        const knowledgeBase = [
            {
                id: 1,
                title: "Right to Withdraw (RTW) Process",
                content: "Period: 14 days from day after loan funding. Process: 1) Provide current balance, 2) Explain daily interest accrual, 3) Repayment period: 30 days from withdrawal, 4) Credit file entry removed upon payment. Customer pays current balance (principal + accrued interest).",
                source: "Customer Service Handbook Section 7.4",
                keywords: ["right to withdraw", "RTW", "14 days", "withdrawal", "cancel loan"]
            },
            {
                id: 2,
                title: "Interest Accrual and Charges",
                content: "Daily interest accrues on outstanding balance. Default charges: ¬£15.00 applied at 4 PM on due date. For payment plan arrangements, interest continues to accrue during repayment period. Always explain to customers how interest affects total repayment amount.",
                source: "Collections & Payment Management Section 7.3",
                keywords: ["interest", "daily interest", "charges", "default fee", "accrual"]
            },
            {
                id: 3,
                title: "Fraud Investigation Process",
                content: "For suspected fraud: 1) Investigate thoroughly, 2) Document all evidence, 3) Report to Massimo Cristi immediately. Never process any transactions if fraud is suspected. Gather all relevant information before escalating. Freeze account activity pending investigation.",
                source: "Special Circumstances Section 8.5",
                keywords: ["fraud", "investigation", "suspicious", "report", "Massimo Cristi"]
            },
            {
                id: 4,
                title: "Website Login Issues - Password Reset",
                content: "Online Password Reset: 1) Direct customer to www.ticktockloans.com, 2) Click login icon (top right), 3) Click 'Forgot Password', 4) Enter email and surname EXACTLY as in CRM (case sensitive), 5) System sends encrypted password. Troubleshooting: Ensure no extra spaces when copying/pasting password.",
                source: "Customer Verification & Security Section 4.1",
                keywords: ["website", "login", "password", "reset", "forgot password", "ticktockloans.com"]
            },
			title: "Website Login Issues - Password Reset",
                content: "Online Password Reset: 1) Direct customer to www.ticktockloans.com, 2) Click login icon (top right), 3) Click 'Forgot Password', 4) Enter email and surname EXACTLY as in CRM (case sensitive), 5) System sends encrypted password. Troubleshooting: Ensure no extra spaces when copying/pasting password.",
                source: "Customer Verification & Security Section 4.1",
                keywords: ["website", "login", "password", "reset", "forgot password", "ticktockloans.com"]
        ];

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                searchKnowledge();
            }
        }

        function quickSearch(query) {
            document.getElementById('searchInput').value = query;
            searchKnowledge();
        }

        function searchKnowledge() {
            const query = document.getElementById('searchInput').value.trim().toLowerCase();
            const resultsSection = document.getElementById('resultsSection');
            const resultsDiv = document.getElementById('searchResults');

            if (!query) {
                alert('Please enter a question or search term');
                return;
            }

            // Show loading
            resultsSection.classList.add('show');
            resultsDiv.innerHTML = '<div class="loading">üîç Searching knowledge base...</div>';

            // Simulate search delay (remove in real implementation)
            setTimeout(() => {
                const results = searchDocuments(query);
                displayResults(results, query);
            }, 500);
        }

        function searchDocuments(query) {
            const queryWords = query.split(' ').filter(word => word.length > 2);
            let results = [];

            knowledgeBase.forEach(doc => {
                let score = 0;
                
                // Check title match
                if (doc.title.toLowerCase().includes(query)) score += 10;
                
                // Check content match
                if (doc.content.toLowerCase().includes(query)) score += 8;
                
                // Check keyword matches
                queryWords.forEach(word => {
                    if (doc.keywords.some(keyword => keyword.includes(word))) {
                        score += 5;
                    }
                    if (doc.content.toLowerCase().includes(word)) {
                        score += 3;
                    }
                    if (doc.title.toLowerCase().includes(word)) {
                        score += 4;
                    }
                });

                if (score > 0) {
                    results.push({ ...doc, score });
                }
            });

            return results.sort((a, b) => b.score - a.score);
        }

        function displayResults(results, query) {
            const resultsDiv = document.getElementById('searchResults');

            if (results.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="no-results">
                        <h3>No results found for "${query}"</h3>
                        <p>Try different keywords or check the quick actions above</p>
                    </div>
                `;
                return;
            }

            let html = `<h3 style="margin-bottom: 20px; color: #2c5aa0;">Found ${results.length} result(s) for "${query}"</h3>`;

            results.forEach(result => {
                html += `
                    <div class="result-item">
                        <div class="result-header">
                            <div class="result-title">${result.title}</div>
                            <div class="result-source">üìÑ ${result.source}</div>
                        </div>
                        <div class="result-content">${result.content}</div>
                        <div class="helpful-btns">
                            <button class="helpful-btn yes" onclick="markHelpful(${result.id}, true)">üëç Helpful</button>
                            <button class="helpful-btn no" onclick="markHelpful(${result.id}, false)">üëé Not helpful</button>
                        </div>
                    </div>
                `;
            });

            resultsDiv.innerHTML = html;
        }

        function markHelpful(resultId, isHelpful) {
            // In real implementation, send this data to your backend
            console.log(`Result ${resultId} marked as ${isHelpful ? 'helpful' : 'not helpful'}`);
            
            // Visual feedback
            const btn = event.target;
            btn.style.background = isHelpful ? '#d4edda' : '#f8d7da';
            btn.style.borderColor = isHelpful ? '#28a745' : '#dc3545';
            btn.textContent = isHelpful ? 'üëç Thanks!' : 'üëé Noted';
            btn.disabled = true;
        }

        // Auto-focus search input when page loads
        window.onload = function() {
            document.getElementById('searchInput').focus();
        };
    </script>
</body>
</html>